{"ast":null,"code":"var _jsxFileName = \"/home/ram/Desktop/Alliance(HRMS)/Frontend/src/components/Allowance/SalaryAdvance/SalaryAdvanceRequestForm.jsx\";\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { main_url, getUserId } from '../../../utils/CommonFunction';\nexport default class SalaryAdvanceRequestForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      employee_list: [],\n      selected_employee: [],\n      one_advance: [],\n      requested_amount: 0,\n      purpose: '',\n      created_user: getUserId(\"user_info=\")\n    };\n  }\n\n  componentDidMount() {\n    if (!Array.isArray(this.state.one_advance)) {\n      this.setSalaryAdvance(this.state.one_advance);\n    }\n\n    this.getEmployeeList();\n  }\n\n  setSalaryAdvance(one) {\n    this.setState({\n      requested_amount: one.requested_amount,\n      purpose: one.purpose,\n      selected_employee: {\n        label: one.employee_name,\n        value: one.user_id,\n        employment_id: one.employment_id\n      }\n    });\n  }\n\n  getEmployeeList() {\n    console.log(main_url);\n    fetch(\"\".concat(main_url, \"staff_loan/getEmployeeList\")).then(res => {\n      if (res.ok) return res.json();\n    }).then(list => {\n      this.setState({\n        employee_list: list\n      });\n    });\n  }\n\n  save() {\n    let createdBy = this.state.created_user;\n    let updatedBy = this.state.created_user;\n    let path = 'saveSalaryAdvance';\n\n    if (!Array.isArray(this.state.one_advance)) {\n      createdBy = this.state.one_advance.createdBy;\n      path = \"editSalaryAdvance/\".concat(this.state.one_advance.schedule_id);\n    }\n\n    var data = {\n      user_id: this.state.selected_employee.value,\n      requested_amount: this.state.requested_amount,\n      purpose: this.state.purpose,\n      createdBy: createdBy,\n      updatedBy: updatedBy\n    };\n    console.log(data);\n    let status = 0;\n    console.log(\"\".concat(main_url, \"salary_advance/\").concat(path));\n    fetch(\"\".concat(main_url, \"salary_advance/\").concat(path), {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST',\n      body: \"advance=\".concat(JSON.stringify(data))\n    }).then(res => {\n      status = res.status;\n      return res.text();\n    }).then(text => {\n      if (status === 200) {\n        toast.success(text); // window.location.replace('/staff_loan_repayment');\n      } else toast.error(text);\n    });\n  }\n\n  render() {\n    let _this$state = this.state,\n        employee_list = _this$state.employee_list,\n        selected_employee = _this$state.selected_employee;\n    return React.createElement(\"div\", {\n      className: \"container staff_loan main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      position: toast.POSITION.TOP_RIGHT,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"New Salary Advance\"), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12 col-sm-6 col-lg-6 col-xl-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Employee Name\"), React.createElement(Select, {\n      options: employee_list,\n      value: selected_employee,\n      onChange: e => this.setState({\n        selected_employee: e\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12 col-sm-6 col-lg-6 col-xl-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Employee ID\"), React.createElement(\"input\", {\n      className: \"full_width\",\n      type: \"text\",\n      value: !Array.isArray(selected_employee) ? selected_employee.employment_id : \"\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row margin-top-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12 col-sm-6 col-lg-6 col-xl-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Amount\"), React.createElement(\"input\", {\n      className: \"full_width\",\n      type: \"number\",\n      min: 0,\n      value: this.state.requested_amount,\n      onChange: e => this.setState({\n        requested_amount: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12 col-sm-6 col-lg-6 col-xl-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Purpose\"), React.createElement(\"input\", {\n      className: \"full_width\",\n      type: \"textarea\",\n      value: this.state.purpose,\n      onChange: e => this.setState({\n        purpose: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row m-20 f-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/salary_advance\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success m-r-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Cancel\")), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.save.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Save\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/ram/Desktop/Alliance(HRMS)/Frontend/src/components/Allowance/SalaryAdvance/SalaryAdvanceRequestForm.jsx"],"names":["React","Component","Select","ToastContainer","toast","main_url","getUserId","SalaryAdvanceRequestForm","constructor","props","state","employee_list","selected_employee","one_advance","requested_amount","purpose","created_user","componentDidMount","Array","isArray","setSalaryAdvance","getEmployeeList","one","setState","label","employee_name","value","user_id","employment_id","console","log","fetch","then","res","ok","json","list","save","createdBy","updatedBy","path","schedule_id","data","status","headers","method","body","JSON","stringify","text","success","error","render","POSITION","TOP_RIGHT","e","target","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Select from 'react-select';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { main_url, getUserId } from '../../../utils/CommonFunction';\n\nexport default class SalaryAdvanceRequestForm extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            employee_list: [],\n            selected_employee: [],\n            one_advance: [],\n            requested_amount: 0,\n            purpose: '',\n            created_user: getUserId(\"user_info=\")\n        }\n    }\n\n    componentDidMount() {\n        if (!Array.isArray(this.state.one_advance)) {\n            this.setSalaryAdvance(this.state.one_advance);\n        }\n        this.getEmployeeList();\n    }\n\n    setSalaryAdvance(one) {\n        this.setState({\n            requested_amount: one.requested_amount,\n            purpose: one.purpose,\n            selected_employee: { label: one.employee_name, value: one.user_id, employment_id: one.employment_id }\n        })\n    }\n\n    getEmployeeList() {\n        console.log(main_url);\n        fetch(`${main_url}staff_loan/getEmployeeList`)\n            .then(res => { if (res.ok) return res.json() })\n            .then(list => {\n                this.setState({\n                    employee_list: list\n                })\n            })\n    }\n\n    save() {\n        let createdBy = this.state.created_user;\n        let updatedBy = this.state.created_user;\n        let path = 'saveSalaryAdvance';\n        if (!Array.isArray(this.state.one_advance)) {\n            createdBy = this.state.one_advance.createdBy;\n            path = `editSalaryAdvance/${this.state.one_advance.schedule_id}`\n        }\n        var data = {\n            user_id: this.state.selected_employee.value,\n            requested_amount: this.state.requested_amount,\n            purpose: this.state.purpose,\n            createdBy: createdBy,\n            updatedBy: updatedBy\n        }\n        console.log(data)\n        let status = 0;\n        console.log(`${main_url}salary_advance/${path}`)\n        fetch(`${main_url}salary_advance/${path}`, {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            method: 'POST',\n            body: `advance=${JSON.stringify(data)}`\n        })\n            .then(res => {\n                status = res.status;\n                return res.text()\n            })\n            .then(text => {\n                if (status === 200) {\n                    toast.success(text);\n                    // window.location.replace('/staff_loan_repayment');\n                }\n                else toast.error(text);\n\n\n            })\n    }\n\n    render() {\n        let { employee_list, selected_employee } = this.state;\n        return (\n            <div className='container staff_loan main-container'>\n                <ToastContainer position={toast.POSITION.TOP_RIGHT} />\n                <h2>New Salary Advance</h2>\n                <div className=\"content\">\n                    <div className=\"row\">\n                        <div className=\"col-12 col-sm-6 col-lg-6 col-xl-6\">\n                            <label>Employee Name</label>\n                            <Select\n                                options={employee_list}\n                                value={selected_employee}\n                                onChange={(e) => this.setState({ selected_employee: e })}\n                            />\n                        </div>\n                        <div className=\"col-12 col-sm-6 col-lg-6 col-xl-6\">\n                            <label>Employee ID</label>\n                            <input className=\"full_width\" type=\"text\" value={!Array.isArray(selected_employee) ? selected_employee.employment_id : \"\"} disabled></input>\n                        </div>\n                    </div>\n                    <div className=\"row margin-top-20\">\n                        <div className=\"col-12 col-sm-6 col-lg-6 col-xl-6\">\n                            <label>Amount</label>\n                            <input className=\"full_width\" type=\"number\" min={0} value={this.state.requested_amount} onChange={(e) => this.setState({ requested_amount: e.target.value })}></input>\n                        </div>\n                        <div className=\"col-12 col-sm-6 col-lg-6 col-xl-6\">\n                            <label>Purpose</label>\n                            <input className=\"full_width\" type=\"textarea\" value={this.state.purpose} onChange={(e) => this.setState({ purpose: e.target.value })}></input>\n                        </div>\n                    </div>\n\n                    <div className=\"row m-20 f-right\">\n                        <a href=\"/salary_advance\"><button className=\"btn btn-success m-r-10\">Cancel</button></a>\n                        <button className=\"btn btn-primary\" onClick={this.save.bind(this)}>Save</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}