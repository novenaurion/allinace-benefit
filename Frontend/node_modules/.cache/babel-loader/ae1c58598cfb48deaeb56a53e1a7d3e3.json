{"ast":null,"code":"var _jsxFileName = \"/home/ram/Desktop/Alliance(HRMS)/Frontend/src/components/Allowance/StaffLoan/StaffLoanList.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { main_url, getCookieData, setCookieData } from '../../../utils/CommonFunction';\nimport 'datatables.net-bs4/css/dataTables.bootstrap4.min.css';\nimport 'datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css';\nimport 'datatables.net-buttons';\n\nconst $ = require('jquery');\n\n$.DataTable = require('datatables.net-bs4');\n$.DataTable = require('datatables.net-responsive-bs4');\nexport default class StaffLoanList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: getCookieData(\"user_info=\"),\n      staff_loan_list: []\n    };\n  }\n\n  componentDidMount() {\n    this.getStaffLoanList();\n    $('#dataTables').on('click', '#toView', function () {\n      var data = $(this).find('#view').text();\n      setCookieData('staff_loan', data);\n      window.location.replace('/staff_loan_view');\n    });\n    $('#dataTables').on('click', 'toEdit', function () {\n      var data = $(this).find('#edit').text();\n      setCookieData('staff_loan', data);\n      window.location.replace('/staff_loan_applyform');\n    });\n  }\n\n  getStaffLoanList() {\n    var user = this.state.user;\n    let id = 0;\n\n    if (user.role_id === 1 || user.role_id === 2 || user.role_id === 3) {\n      id = 0;\n    } else {\n      id = user.user_id;\n    }\n\n    fetch(\"\".concat(main_url, \"staff_loan/getStaffLoanList/user_id=\").concat(id)).then(res => res.json()).then(data => {\n      this.showTable(data);\n      this.setState({\n        staff_loan_list: data\n      });\n    });\n  }\n\n  showTable(data) {\n    var table;\n    var list = [];\n    var obj = [];\n    var user = this.state.user;\n    let btn_id,\n        text_id = \"\";\n\n    if (user.role_id === 1 || user.role_id === 2 || user.role_id === 3) {\n      btn_id = 'toView';\n      text_id = 'view'; // '<button style=\"margin-right:10px\" class=\"btn btn-primary btn-sm own-btn-edit\" id=\"toEdit\" ><span id=\"edit\" class=\"hidden\" >' + JSON.stringify(obj) + '</span>  <i className=\"fa fa-cogs\"></i>&nbsp;Edit</button>'\n    } else {\n      btn_id = 'toEdit';\n      text_id = 'edit'; // action = '<button style=\"margin-right:10px\" class=\"btn btn-primary btn-sm own-btn-edit\" id=\"toEdit\" ><span id=\"edit\" class=\"hidden\" >' + JSON.stringify(obj) + '</span>  <i className=\"fa fa-cogs\"></i>&nbsp;Edit</button>'\n    }\n\n    if ($.fn.dataTable.isDataTable('#dataTables')) {\n      table = $('#dataTables').dataTable();\n      table.fnClearTable();\n      table.fnDestroy();\n      $('#dataTables').empty();\n    }\n\n    for (let i = 0; i < data.length; i++) {\n      obj = data[i];\n      list.push({\n        applicant_name: obj.applicant_name,\n        institution_name: obj.institution_name,\n        outstanding_amount: obj.outstanding_amount,\n        installment_amount: obj.installment_amount,\n        maturity_date: obj.maturity_date,\n        repayment_period: obj.repayment_period,\n        action: \"<button style=\\\"margin-right:10px\\\" class=\\\"btn btn-primary btn-sm own-btn-edit\\\" id=\".concat(btn_id, \" ><span id=\").concat(text_id, \" class=\\\"hidden\\\" >\").concat(JSON.stringify(obj), \"</span>  <i className=\\\"fa fa-cogs\\\"></i>&nbsp;Edit</button>\")\n      });\n    }\n\n    table = $(\"#dataTables\").DataTable({\n      autofill: false,\n      bLengthChange: false,\n      bInfo: false,\n      responsive: true,\n      paging: false,\n      buttons: false,\n      data: list,\n      columns: [{\n        title: \"Applicant Name\",\n        data: \"applicant_name\"\n      }, {\n        title: \"Institution Name\",\n        data: \"institution_name\"\n      }, {\n        title: \"Outstanding Amount\",\n        data: \"outstanding_amount\"\n      }, {\n        title: \"Installment Amount\",\n        data: \"installment_amount\"\n      }, {\n        title: \"Maturity Date\",\n        data: \"maturity_date\"\n      }, {\n        title: \"Repayment Repriod\",\n        data: \"repayment_period\"\n      }, {\n        title: \"Action\",\n        data: \"action\"\n      }]\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container staff_loan main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row m-b-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Staff Loan List\")), React.createElement(\"div\", {\n      className: \"col-sm-6 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/staff_loan_applyform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success title_float_btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"add_new_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus-square\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), \"Add New\")))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-striped table-bordered table-hover responsive nowrap dt-responsive\",\n      id: \"dataTables\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/ram/Desktop/Alliance(HRMS)/Frontend/src/components/Allowance/StaffLoan/StaffLoanList.jsx"],"names":["React","Component","Link","main_url","getCookieData","setCookieData","$","require","DataTable","StaffLoanList","constructor","props","state","user","staff_loan_list","componentDidMount","getStaffLoanList","on","data","find","text","window","location","replace","id","role_id","user_id","fetch","then","res","json","showTable","setState","table","list","obj","btn_id","text_id","fn","dataTable","isDataTable","fnClearTable","fnDestroy","empty","i","length","push","applicant_name","institution_name","outstanding_amount","installment_amount","maturity_date","repayment_period","action","JSON","stringify","autofill","bLengthChange","bInfo","responsive","paging","buttons","columns","title","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { main_url, getCookieData, setCookieData } from '../../../utils/CommonFunction';\nimport 'datatables.net-bs4/css/dataTables.bootstrap4.min.css';\nimport 'datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css';\nimport 'datatables.net-buttons';\n\nconst $ = require('jquery');\n$.DataTable = require('datatables.net-bs4');\n$.DataTable = require('datatables.net-responsive-bs4');\n\n\nexport default class StaffLoanList extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: getCookieData(\"user_info=\"),\n            staff_loan_list: []\n        }\n    }\n\n    componentDidMount() {\n        this.getStaffLoanList();\n        $('#dataTables').on('click', '#toView', function () {\n            var data = $(this).find('#view').text();\n            setCookieData('staff_loan', data);\n            window.location.replace('/staff_loan_view');\n        })\n\n        $('#dataTables').on('click', 'toEdit', function () {\n            var data = $(this).find('#edit').text();\n            setCookieData('staff_loan', data);\n            window.location.replace('/staff_loan_applyform');\n        })\n    }\n\n    getStaffLoanList() {\n        var user = this.state.user;\n        let id = 0;\n        if (user.role_id === 1 || user.role_id === 2 || user.role_id === 3) {\n            id = 0;\n        }\n        else {\n            id = user.user_id;\n        }\n        fetch(`${main_url}staff_loan/getStaffLoanList/user_id=${id}`)\n            .then(res => res.json())\n            .then(data => {\n                this.showTable(data);\n                this.setState({\n                    staff_loan_list: data\n                })\n            })\n    }\n\n    showTable(data) {\n        var table;\n        var list = [];\n        var obj = [];\n\n        var user = this.state.user;\n        let btn_id, text_id = \"\";\n\n        if (user.role_id === 1 || user.role_id === 2 || user.role_id === 3) {\n            btn_id = 'toView';\n            text_id = 'view';\n            // '<button style=\"margin-right:10px\" class=\"btn btn-primary btn-sm own-btn-edit\" id=\"toEdit\" ><span id=\"edit\" class=\"hidden\" >' + JSON.stringify(obj) + '</span>  <i className=\"fa fa-cogs\"></i>&nbsp;Edit</button>'\n        }\n        else {\n            btn_id = 'toEdit';\n            text_id = 'edit';\n            // action = '<button style=\"margin-right:10px\" class=\"btn btn-primary btn-sm own-btn-edit\" id=\"toEdit\" ><span id=\"edit\" class=\"hidden\" >' + JSON.stringify(obj) + '</span>  <i className=\"fa fa-cogs\"></i>&nbsp;Edit</button>'\n        }\n\n        if ($.fn.dataTable.isDataTable('#dataTables')) {\n            table = $('#dataTables').dataTable();\n            table.fnClearTable();\n            table.fnDestroy();\n            $('#dataTables').empty();\n        }\n\n        for (let i = 0; i < data.length; i++) {\n            obj = data[i];\n            list.push({\n                applicant_name: obj.applicant_name,\n                institution_name: obj.institution_name,\n                outstanding_amount: obj.outstanding_amount,\n                installment_amount: obj.installment_amount,\n                maturity_date: obj.maturity_date,\n                repayment_period: obj.repayment_period,\n                action: `<button style=\"margin-right:10px\" class=\"btn btn-primary btn-sm own-btn-edit\" id=${btn_id} ><span id=${text_id} class=\"hidden\" >${JSON.stringify(obj)}</span>  <i className=\"fa fa-cogs\"></i>&nbsp;Edit</button>`\n            })\n        }\n        table = $(\"#dataTables\").DataTable({\n            autofill: false,\n            bLengthChange: false,\n            bInfo: false,\n            responsive: true,\n            paging: false,\n            buttons: false,\n            data: list,\n            columns: [\n                { title: \"Applicant Name\", data: \"applicant_name\" },\n                { title: \"Institution Name\", data: \"institution_name\" },\n                { title: \"Outstanding Amount\", data: \"outstanding_amount\" },\n                { title: \"Installment Amount\", data: \"installment_amount\" },\n                { title: \"Maturity Date\", data: \"maturity_date\" },\n                { title: \"Repayment Repriod\", data: \"repayment_period\" },\n                { title: \"Action\", data: \"action\" }\n            ]\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"container staff_loan main-container\">\n                <div className=\"content\">\n                    <div className=\"row m-b-10\">\n                        <div className=\"col-sm-6 col-lg-6\">\n                            <h2>Staff Loan List</h2>\n                        </div>\n                        <div className=\"col-sm-6 col-lg-6\">\n                            <Link to=\"/staff_loan_applyform\">\n                                <button className=\"btn btn-success title_float_btn\">\n                                    <span className=\"add_new_icon\"><i className=\"fa fa-plus-square\"></i></span>\n                                    Add New\n                                    </button>\n                            </Link>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <table className=\"table table-striped table-bordered table-hover responsive nowrap dt-responsive\"\n                            id=\"dataTables\"\n                        />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}